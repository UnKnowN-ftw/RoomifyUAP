{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="{% static 'images/roomify_favicon.png' %}" />
    <title>RoomifyUAP | Admin Dashboard</title>
    <link rel="stylesheet" href="{% static 'css/admin_dashboard_styles.css' %}" />
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="logo-container">
        <img src="{% static 'images/ROOMIFY.png' %}" alt="Roomify Logo" class="logo" />
        <h1>RoomifyUAP Admin</h1>
      </div>
      <nav>
        <a href="{% url 'admin_dashboard' %}">Dashboard</a>
        <a href="{% url 'view_users' %}">Users</a>
        <a href="{% url 'admin_logout' %}">Logout</a>
      </nav>
    </header>

    <!-- Dashboard Content -->
    <main>
      <section class="dashboard-content">
        <h2>Admin Dashboard</h2>
        <p>Welcome, {{ admin_user.last_name|default:admin_user.username }}!</p>
        <p>Manage owners and renters efficiently from this panel.</p>

        <!-- Owners Table -->
        <div class="table-section">
          <h3>Owners</h3>
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Verified</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% if owners %}
                {% for owner in owners %}
                  <tr>
                    <td>{{ owner.id }}</td>
                    <td>{{ owner.user.get_full_name|default:owner.user.username }}</td>
                    <td>{{ owner.is_verified|yesno:'Yes,No' }}</td>
                    <td>
                      <form method="POST" action="{% url 'verify_user' owner.id 'owner' %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="verify-btn">Verify</button>
                      </form>
                      <form method="POST" action="{% url 'reject_user' owner.id 'owner' %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="reject-btn">Reject</button>
                      </form>
                    </td>
                  </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="4">No owners found.</td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>

        <!-- Renters Table -->
        <div class="table-section">
          <h3>Renters</h3>
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Verified</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% if renters %}
                {% for renter in renters %}
                  <tr>
                    <td>{{ renter.id }}</td>
                    <td>{{ renter.user.get_full_name|default:renter.user.username }}</td>
                    <td>{{ renter.is_verified|yesno:'Yes,No' }}</td>
                    <td>
                      <form method="POST" action="{% url 'verify_user' renter.id 'renter' %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="verify-btn">Verify</button>
                      </form>
                      <form method="POST" action="{% url 'reject_user' renter.id 'renter' %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="reject-btn">Reject</button>
                      </form>
                    </td>
                  </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="4">No renters found.</td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-bottom">Â© 2025 RoomifyUAP | All Rights Reserved</div>
    </footer>
  </body>
</html>
